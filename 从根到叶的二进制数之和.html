<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
<script>
class Nodes {
  constructor(value) {
    this.val = value
    // 左右节点
    this.left = this.right = undefined
  }
}

  // 构建二叉树数据结构
class Tree {
  constructor(data) {
    // 临时存储所有节点
    let nodeList = []
    // 顶节点
    let root
    for (let i = 0; i < data.length; i++) {
      // 数据变成节点
      let node = new Nodes(data[i])          
      nodeList.push(node)
      if(i > 0) {
        // 计算当前节点属于哪一层，详细请看文章末尾
        let n = Math.floor(Math.sqrt(i+1))

        // 当前层的起始值 因为每层是 2 n 的平方
        let f = Math.pow(2, n) - 1
        // 记录上一层的起始点
        let p = Math.pow(2, n - 1) - 1

        // 找到当前节点的父节点
        let parent = nodeList[p + Math.floor((i - f) / 2)]
        // console.log(parent)
        // 把当前节点和 上一层的父节点关联起来
        // 判断是否有左节点，已有那就复制给又节点，因为二叉树只有左右两个节点
          if(parent.left) {
            parent.right = node
          } else {
            parent.left = node
          }
      }
    }
    // 取出第一个根节点
    root = nodeList.shift()
    nodeList.length = 0
    return root
  }
}

/**
 * @param {TreeNode} root
 * @return {number}
 */
var sumRootToLeaf = function(node) {
    const root = new Tree(node)
    console.log(root);
    const dfs = (root, val) => {
        if (!root) {
            return 0
        }
        console.log(val);
        val = (val << 1) | root.val
        console.log(val);

        if (!root.left && !root.right) {
            return val
        }

        return dfs(root.left, val) + dfs(root.right, val)
    }

    return dfs(root, 0)
};

let r1 = [1,0,1,0,1,0,1];
console.log(sumRootToLeaf(r1))
</script>
</html>